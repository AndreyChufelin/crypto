import{V as N,b as U,c as $,a as q,T as b}from"./TableCell.6555dbc0.js";import{d as S,b as w,o as v,c as T,n as A,u as e,_ as L,r as h,y as C,w as F,z as E,A as k,B as P,m as R,g as z,i as V,j as D,k as l,a as r,q as H,F as y,f as g,h as j,t as _}from"./index.6a09b27b.js";const G=S({__name:"TableStatusField",props:{status:null},setup(c){const o=c,a=w(()=>(Date.now()-o.status)/1e3);return(m,s)=>(v(),T("div",{class:A(["indicator",{indicator_medium:e(a)>600,indicator_long:e(a)>86400}])},null,2))}});const J=L(G,[["__scopeId","data-v-94621210"]]);function K(){const c=h([]),{status:o,message:a,isEnd:m,callPagination:s}=C(),p=h(null);async function u(d,f=1,i){p.value=d!=null?d:null,s("markets",{parametrs:{baseId:d,exchangeId:i}},f,async x=>{x.forEach(n=>{c.value.push({exchange:n.exchangeId,pair:`${n.baseSymbol}/${n.quoteSymbol}`,price:E(k(n.priceUsd)),volume:E(k(n.volumeUsd24Hr)),volumePercent:+parseFloat(n.percentExchangeVolume).toFixed(0),status:n.updated})})})}return F(P,()=>{c.value=[],u(p.value)}),{exchanges:c,status:o,message:a,isEnd:m,getExchanges:u}}function X(){const{status:c,call:o}=C(),a=h(),m=h("");async function s(p){m.value=p,await o(`exchanges/${p}`,{},async u=>{a.value={id:u.id,rank:u.rank,name:u.name,volume:E(k(u.volumeUsd)),volumePercent:+parseFloat(u.percentTotalVolume).toFixed(0)}})}return F(P,()=>{a.value=void 0,s(m.value)}),{status:c,exchange:a,getExchange:s}}const M=g("No data"),O=g("Error"),Y=S({__name:"ExchangeTable",props:{id:null,exchangeId:null},setup(c){var x;const o=c,{t:a}=R(),{currencyLable:m}=z(),s=h(1),{exchanges:p,isEnd:u,status:d,getExchanges:f}=K();f((x=o.id)!=null?x:null,s.value,o.exchangeId);const i=w(()=>[{name:"exchange",lable:a("assetTable.name"),length:1,sortable:!0,align:"left"},{name:"pair",lable:a("exchangeTable.pair"),length:1,sortable:!0,align:"right"},{name:"price",lable:a("assetTable.price"),length:1,sortable:!0,align:"right"},{name:"volume",lable:a("assetTable.volume"),length:1,sortable:!0,align:"right"},{name:"volumePercent",lable:a("exchangeTable.total")+"(%)",length:1,sortable:!0,align:"right"},{name:"status",lable:a("exchangeTable.status"),length:1,sortable:!0,align:"right"}]);return F(s,()=>{var n;f((n=o.id)!=null?n:null,s.value,o.exchangeId)}),(n,I)=>{const B=j("router-link");return v(),V(N,{status:e(d)},D({header:l(()=>[r(U,{cells:e(i)},null,8,["cells"])]),body:l(()=>[(v(!0),T(y,null,H(e(p),t=>(v(),V(q,{key:t.pair+t.exchange},{default:l(()=>[r(b,{column:e(i)[0]},{default:l(()=>[r(B,{class:"link",to:{name:"singleExchange",params:{id:t.exchange}}},{default:l(()=>[g(_(t.exchange),1)]),_:2},1032,["to"])]),_:2},1032,["column"]),r(b,{column:e(i)[1]},{default:l(()=>[g(_(t.pair),1)]),_:2},1032,["column"]),r(b,{column:e(i)[2]},{default:l(()=>[g(_(e(m))+_(t.price),1)]),_:2},1032,["column"]),r(b,{column:e(i)[3]},{default:l(()=>[g(_(e(m))+_(t.volume),1)]),_:2},1032,["column"]),r(b,{column:e(i)[4]},{default:l(()=>[t.volumePercent?(v(),T(y,{key:0},[g(_(t.volumePercent)+"% ",1)],64)):(v(),T(y,{key:1},[M],64))]),_:2},1032,["column"]),r(b,{column:e(i)[5]},{default:l(()=>[r(J,{status:t.status},null,8,["status"])]),_:2},1032,["column"])]),_:2},1024))),128))]),footer:l(()=>[r($,{modelValue:s.value,"onUpdate:modelValue":I[0]||(I[0]=t=>s.value=t),status:e(d),isEnd:e(u)},null,8,["modelValue","status","isEnd"])]),_:2},[e(d)==="error"?{name:"error",fn:l(()=>[O]),key:"0"}:void 0]),1032,["status"])}}});export{Y as _,X as u};
